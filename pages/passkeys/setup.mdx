# Installation

__Using Yarn or NPM__

`$ npm insall --save keyri-front-end`

or

`$ yarn add keyri-front-end`

# Server

You need to set up two routes (`registration`,`authentication`) to verify the information the client is providing you is valid.

## Registration

```js
import * as KeyriFrontEnd  from "keyri-front-end";

//
// The publicSignatureKey and privateSignatureKey come from the Keyri-Dashboard.
// In a production Environment, these variables are .env variables
//
import {publicSignatureKey, privateSignatureKey} from "./keys.mjs";
const {passkeyRegister} = KeyriFrontEnd.default.ApplessServer; 

const host = "my.app.com";
const userId = 

export async function passkey_registration(req, res, nxt)  {
    let response = await passkeyRegister(
        publicSignatureKey, 
        privateSignatureKey, 
        req.body, 
        host, 
        userId, 
        userName,
        metaData);
    res.status(200).send(response);
}
```

## 

## Desktop Passkey Setup
This 

### PASSKEYS - DESKTOP

Lorem Ipsum Dolor Sed Amat...

## Setup

Do something like this.

```js

//
// This file sets up our "localAppless" object
// and exposes some functions that we can tie to buttons
// on the demo page
//

const { ApplessLocal } = KeyriFrontEnd;

//
// Set up
//
let localAppless = new ApplessLocal(
  "./api/passkey/register",
  "./api/passkey/login"
);

```

## Local Registration
In the same file (or not) do this:

```js
// Register a LOGGED IN USER
async function makeLocalPassKey(e) {
  e.preventDefault();
  let idToken = "{USER-SESSION-TOKEN}";
  await localAppless.register(idToken);
  alert("LOCAL PASS KEY CREATED");
}
```
Where `{USER-SESSION-TOKEN}` is the session token or something to prove the user trying to register is logged in that you can prove server side.


## Local Authentication
```js
// Authenticate an EXISTING USER
async function authenticateLocalPasskey(e) {
  e.preventDefault();
  let authData = await localAppless.authenticate(true);
  console.log({ authData });
  alert("LOGGED IN!");
}
```

# PASSKEYS - QR

You can also use your user's phone as an auth device with QR, blah blah blah

## Desktop Setup

Nothing if you are set up for local passkeys.

## Desktop Registration

```js
//
// This generates a url for the iframe.
// YOU have to set the `src` of the iframe.
//
async function makeMobilePassKey(e) {
  e.preventDefault();

  const SESSION_TOKEN = "{SESSION_TOKEN}";
  const QR_IFRAME = document.getElementById("qr-iframe");
  const ONE_TIME_PIN = prompt("Pick a number between 1 and 100");
  let QUERY_STRING = localAppless.registerMobile(SESSION_TOKEN, ONE_TIME_PIN);
  let TMP_SRC = `./qr.html?mobile=http://localhost/mobile.html&qsd=false&Environment=dev&Origin=misc.keyri.com&${QUERY_STRING}`;
  
  QR_IFRAME.src = TMP_SRC;
}
```
