---
description: Permanently associate your users with their devices to improve UX and reduce fraud
---

# Web App Fraud Analytics

Keyri provides a JavaScript agent for fraud analytics that produces durable device ID fingerprints that persist across sessions and provides risk analytics data to your client and server. Trigger the fraud analytics agent at each event that you want to assess the risk of; the Keyri API will provide a summary of the risk level and details about the event's risk signals as well as details about the user such as location. The JavaScript agent is lightweight and can be deployed in a few minutes.

## Features

- Retrieve device data for logging and analytics
- Create identifier based on device data

## Installing

### Package manager

Using npm:

```bash
$ npm install keyri-browser-analytics
```

Once the package is installed, you can import the library using `import` or `require`:

```typescript
import keyriEvent from 'keyri-browser-analytics';
```

You can get the constants you need (your `apiKey` and `serviceEncryptionKey`(pair) from the Keyri Dashboard under Setup & Credentials)

## Example

**Note** CommonJS usage

### Browser

```typescript
import keyriEvent from 'keyri-browser-analytics';

const keyriApiKey = 'your_api_key';
const serviceEncryptionKey = 'your_ECDH_public_key';

async function login(userId, password) {
  // Call the Keyri fraud analytics function and await its response
  const encryptedRiskObject = await keyriEvent(
    userId,
    'login',
    serviceEncryptionKey,
    apiKey
  );
  // Send the Keyri response object
  // as part of your API call to retrieve protected resources
  const loginResponse = await fetch('/api/login', {
    method: 'POST',
    body: { userId, password, encryptedRiskObject },
  });
}
```

### Server

```typescript
// You'll want to decrypt the risk object through ECDH -> HKDF -> AES.
// Our "EZCrypto" library makes decryption simple, but you can use
// raw native crypto APIs as well
import EZCrypto from '@justinwwolcott/ez-web-crypto';

const { username, password, encryptedRiskObject } = req.body;
const ezCrypto = new EZCrypto();

const privateKey = 'your_ECDH_private_key';

let decryptedRiskObject = await ezCrypto.HKDFDecrypt(
  privateKey,
  encryptedRiskObject.keyriEncryptionPublicKey,
  encryptedRiskObject.salt,
  encryptedRiskObject.iv,
  encryptedRiskObject.encryptedPayload
);

decryptedRiskObject = new TextDecoder().decode(decryptedRiskObject);
decryptedRiskObject = JSON.parse(decryptedLoginEvent).fingerprintEvent;

// You can now parse through the `fingerprintEvent` object to read and
// act on parts of the risk assessment you care about

// ...proceed with your login function accordingly
```
